<!DOCTYPE HTML>
<html>
<head>
<title>Settings</title>
	
	
	<!-- Styles:-->
	<link rel="stylesheet" href="./theme/Wikus/WikusTheme.css" />
        <link rel="stylesheet" href="./theme/Wikus/jquery.mobile.structure-1.1.0.min.css" />
        <script src="./theme/Wikus/jquery-1.7.1.min.js"></script>
        <script src="./theme/Wikus/jquery.mobile-1.1.0.min.js"></script>
	
	<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
	<script type="text/javascript" charset="utf-8" src="inisystem.js"></script>
<!--	<script type="text/javascript" charset="utf-8" src="newINI.js"></script>-->
	
	<script type="text/javascript">
            
  /*Settings javascript code: to test INI manipulation
   *
   */
  //create an INI object
  //manipulate the INI object
  //destroy the INI object by saving its' contents to a file
  
  //the following code is just an example of what can be accomplished by using the INI.js library
  //startINI() is a function that reads from the settings file and creates an INI object by parsing the text from the file.
  //stopINI() writes the back to INI object to the file
  
  //INIset(section,subsection,somevalue) sets or creates this section with the corresponding subsection to somevalue
  //INIget(section,subsection) return the value or null
  
 /*Code following*/

 function onBodyLoad() {
       
        //Add the PhoneGap deviceready event listener
        document.addEventListener("deviceready", onDeviceReady, false);
      }

      function onDeviceReady() {
        //PhoneGap initialized
        
       
	startINI();
	initFileSystem();
	file_content = "dummy text here .....";
      }

  function setUserAge() {
      //var age = get('user','age');
      //if (age==null)
      
                var newage = document.getElementById("input").value+"";
                alert("trying to set"+newage);
      if (INIset("user","age",newage))
          alert("age is set successfully");
      else
          alert("could not set age");
             
  }
  
  
  function insert() {
  var newkey = document.getElementById("keyinput").value;
  var newval = document.getElementById("valinput").value;
  
  if (INIset("tmp",newkey,newval)) {
  navigator.notification.beep(2);
  
           navigator.notification.alert('set successfully','success','OK');
          }
          else 
          alert("could not set...");
  }
function getUserAge() {
    //createsect();
    alert("getting age");
    var age = INIget("user","age");
    alert("getting age"+age);
    document.getElementById("age").innerHTML = "Age: "+age;
}

/*var ini = new Ini();
ini.parse([
    'prop = value',
    '[sect]',
    'foo = bar',
    'baz = yes',
    '[sect "label"]',
    'foo = "bar"',
    'baz = "jjj"'
].join('\n'));

alert(ini.get('prop'));           // value
ini.get('sect.foo')       // bar
ini.get('sect:label.baz') // false

//ini.toObject()            // {prop: value, sect: { foo: bar, baz: true } ...}
alert(ini.toString());        // Generates back the ini file
//writeToIni('user','customvar');
}

//function readValue(file_text,section,*/

</script>
  </head>
  <body  onload="onBodyLoad()">
  <div id="loader" data-role="page" data-theme="a">
 <div data-role="header" data-position="inline">
                <h1>User Settings</h1>
                <h2>Remember the INIstart is called when this page is opened</h2>
            </div>
  
    <div data-role="content">
        <p id="age">User age displayed here</p>
      
      <input id="input" name="customvar" type="text" value="88" />
      <input class="button" type="button" value="change age in the internal INI object" onclick="setUserAge() ;"/><br />
      
      <input class="button" type="button" value="get user age and display it" onclick="getUserAge() ;"/><br />
      
      <!--<input class="button" type="button" value="Open File(settings.ini)" onclick="startINI() ;"/><br />-->
      <input class="button" type="button" value="Close File(settings.ini)" onclick="stopINI() ;"/><br />
      <input class="button" type="button" value="Show contents" onclick="showContents() ;"/><br />
      
      
      
      <br />
      <input id="keyinput" name="key" type="text"  />
      <input id="valinput" name="val" type="text"  />
      <input class="button" type="button" value="Insert or update" onclick="insert() ;"/><br />
      
      <br />
      <input class="button" type="button" value="write to file" onclick="writeFile('new.txt') ;"/><br />
      <input class="button" type="button" value="read from file - new.txt" onclick="readFile('new.txt') ;"/><br />
      <input class="button" type="button" value="Delete new.txt" onclick="deleteFile('new.txt') ;"/><br />
      <input class="button" type="button" value="dir entries - see console" onclick="getDirectoryEntries();"/><br />
      
      
    </div>
  </div>
    
    
  </body>
</html>